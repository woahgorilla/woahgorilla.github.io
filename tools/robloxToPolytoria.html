<!DOCTYPE html>
<html>
    <head>
        <title>Roblox to Polytoria</title>
        <link rel="icon" type="images/x-icon" href="https://woahgorilla.github.io/favicon.ico">
        <meta name="keywords" content="polytoria, roblox, converter, polytoria to roblox, shirt, pants, polytoria clothes converter">
        <meta property="og:title" content="Free Roblox to Polytoria clothes converter">
        <meta property="og:site_name" content="Roblox to Polytoria clothes converter">
        <meta property="og:description" content="Convert Roblox clothes to Polytoria free with no uploads!">
        <meta name="description" content="Convert Roblox clothes to Polytoria free with no uploads!">
        <meta name="author" content="Ultracat39">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="../woahgorilla.css">
    </head>
    <body>
        <h1>Roblox to Polytoria</h1>
        <input type="file" id="fileInput" onchange="display()">
        <p style="margin-top: 0;"><button onclick="reset()" class="miniButton redButton">Reset</button> <button onclick="convert()" class="miniButton greenButton">Convert!</button></p>
        <canvas class="box" id="canvas1" height="585" width="559" style="width: 400px;"></canvas>
        <canvas class="hidden" id="canvas2" height="1024" width="1024"></canvas>
        <a id="dummyDownloadLink" class="hidden"></a>
        <p class="center">Quickly convert roblox shirts and pants to use them for Polytoria.</p>
        <script>
            const canvas1 = document.getElementById('canvas1');
            const ctx1 = canvas1.getContext('2d');
            const canvas2 = document.getElementById('canvas2');
            const ctx2 = canvas2.getContext('2d');
            const fileInput = document.getElementById('fileInput');
            let image;
            function convert() {
                if (fileInput.value != '') {
                    //torso
                    ctx2.drawImage(image, 165, 74, 64, 128, 89, 184, 100, 200); //left torso side
                    ctx2.drawImage(image, 231, 8, 128, 64, 199, 74, 200, 100); //top of torso
                    ctx2.drawImage(image, 231, 74, 128, 128, 199, 184, 200, 200); //front of torso
                    ctx2.drawImage(image, 361, 74, 64, 128, 409, 184, 100, 200); //right torso side
                    ctx2.drawImage(image, 231, 204, 128, 64, 199, 394, 200, 100); //bottom of torso
                    ctx2.drawImage(image, 427, 74, 128, 128, 519, 184, 200, 200); //back of torso
                    //limbs
                    for (let i = 0; i < 4; i++) {
                        let g = 0;
                        if (i == 1) {
                            g = 2; //this might seem stupid, but it is because of a bug with polytoria.
                            ctx2.drawImage(image, 19+(i*66), 355, 2, 128, 52+(i*110), 667, 2, 200); //this line is in case they fix the bug.
                        }
                        ctx2.drawImage(image, 19+(i*66), 355, 64, 128, 52+(i*110 + g), 667, 100, 200); //all horizontal sides of right arm/leg
                    }
                    for (let i = 0; i < 4; i++) {
                        ctx2.drawImage(image, 308+(i*66), 355, 64, 128, 538+(i*110), 667, 100, 200); //all horizontal sides of left arm/leg
                    }
                    ctx2.drawImage(image, 217, 289, 64, 64, 382, 557, 100, 100); //top of right arm
                    ctx2.drawImage(image, 308, 289, 64, 64, 538, 557, 100, 100); //top of left arm
                    ctx2.drawImage(image, 217, 485, 64, 64, 382, 877, 100, 100); //top of right arm
                    ctx2.drawImage(image, 308, 485, 64, 64, 538, 877, 100, 100); //top of left arm
                    downloadCanvasAsImage();
                }
            }
            function display() {
                ctx1.clearRect(0, 0, canvas1.width, canvas1.height);
                window.createImageBitmap(fileInput.files[0]).then(function (img) {
                    ctx1.drawImage(img, 0, 0);
                    image = img;
                });
            } //165 74
            
            function downloadCanvasAsImage(){
                let canvasImage = canvas2.toDataURL('image/png');
                let a = document.getElementById('dummyDownloadLink');
                let xhr = new XMLHttpRequest();
                xhr.responseType = 'blob';
                xhr.onload = function () {
                    a.href = window.URL.createObjectURL(xhr.response);
                    a.download = 'result.png';
                    a.click();
                };
                xhr.open('GET', canvasImage);
                xhr.send();
            }
            function reset() {
                ctx1.clearRect(0,0,585,559);
                fileInput.value = null;
            }
        </script>
        <p style="text-align: center; margin: 20px auto;">
            Made by Ultracat39<br><br><a href="https://woahgorilla.github.io/" style="color:#149e9e;text-decoration:underline;">Back to home page</a>
        </p>
    </body>
</html>